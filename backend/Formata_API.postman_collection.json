{
  "info": {
    "name": "Formata API - Streamlined with Clean Data Profiling",
    "description": "Complete Postman collection for testing Formata API with 9-step streamlined pipeline including ydata-profiling HTML reports on clean data.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health & Status",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            },
            "description": "Check if API is running (no authentication required)"
          },
          "response": []
        },
        {
          "name": "Base URL",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/",
              "host": ["{{base_url}}"],
              "path": [""]
            },
            "description": "API welcome message (no authentication required)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "File Upload (Step 1)",
      "item": [
        {
          "name": "Upload CSV File",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "data.csv",
                  "disabled": false
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/ingest",
              "host": ["{{base_url}}"],
              "path": ["ingest"]
            },
            "description": "Upload CSV file and create job\n\n**Step 1: Upload & Create Job**\n\nSupported formats: CSV, JSON, Excel (.xlsx/.xls), Markdown\n\nâœ… Save the job_id from response to {{job_id}} variable for next requests"
          },
          "response": []
        },
        {
          "name": "Upload JSON File",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "data.json",
                  "disabled": false
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/ingest",
              "host": ["{{base_url}}"],
              "path": ["ingest"]
            },
            "description": "Upload JSON file and create job"
          },
          "response": []
        },
        {
          "name": "Upload Excel File",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "data.xlsx",
                  "disabled": false
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/ingest",
              "host": ["{{base_url}}"],
              "path": ["ingest"]
            },
            "description": "Upload Excel file and create job"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Job Processing (Steps 2-9)",
      "item": [
        {
          "name": "Start Processing",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"normalize\": true,\n  \"remove_duplicates\": true,\n  \"remove_outliers\": false,\n  \"filters\": {},\n  \"output_format\": \"csv\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/process/{{job_id}}",
              "host": ["{{base_url}}"],
              "path": ["process", "{{job_id}}"]
            },
            "description": "Start 9-step pipeline processing\n\n**Processing Steps:**\n- Step 2: Parse Data (20%)\n- Step 3: Normalize Data Types (25%)\n- Step 4: Apply Filters (40%)\n- Step 5: Remove Duplicates & Outliers (50%)\n- Step 6: Validate Results (65%)\n- Step 7: Profile Clean Data (ydata-profiling HTML) (80%)\n- Step 8: Convert/Vectorize (90%)\n- Step 9: Save Outputs + Reports (95-100%)\n\n**Configuration:**\n- normalize: boolean\n- remove_duplicates: boolean\n- remove_outliers: boolean\n- filters: object\n- output_format: \"csv\" or \"json\""
          },
          "response": []
        },
        {
          "name": "Check Processing Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/status/{{job_id}}",
              "host": ["{{base_url}}"],
              "path": ["status", "{{job_id}}"]
            },
            "description": "Get real-time status and progress (0.0-1.0)\n\nReturns:\n- status: pending | processing | completed | failed\n- progress: 0.0 to 1.0\n- rows_before: Original row count\n- rows_after: Processed row count\n- errors: Array of validation errors\n- metadata: Processing metadata"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Data Profiling (Step 7)",
      "item": [
        {
          "name": "Get Data Profile (HTML)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/profile/{{job_id}}",
              "host": ["{{base_url}}"],
              "path": ["profile", "{{job_id}}"]
            },
            "description": "Get HTML profile report of CLEAN processed data\n\n**Step 7 Output:**\n- Generated after validation (on clean data)\n- Created by ydata-profiling\n- Returns comprehensive HTML report\n\n**Includes:**\n- Dataset Overview\n- Variable Statistics\n- Correlations\n- Missing Values Analysis\n- Sample Data\n- Duplicate Rows\n- Interactions\n\n**Status Codes:**\n- 200: Profile ready, returns HTML content\n- 202: Job still processing (with progress %)\n- 404: Job not found or profile not generated\n- 500: Job failed during processing"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Downloads (Steps 10-11)",
      "item": [
        {
          "name": "Download Clean Data File",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/result/{{job_id}}/download",
              "host": ["{{base_url}}"],
              "path": ["result", "{{job_id}}", "download"]
            },
            "description": "Download processed/cleaned data file (only when status=completed)\n\nReturns downloadable file:\n- CSV or JSON format based on output_format config\n- Filename: {job_id}_clean.csv or {job_id}_clean.json\n- Content-Type: text/csv or application/json\n\n**Status Codes:**\n- 200: File ready, downloads file\n- 400: Job not completed yet\n- 404: Job not found or file missing"
          },
          "response": []
        },
        {
          "name": "Download Error Report",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/errors/{{job_id}}/download",
              "host": ["{{base_url}}"],
              "path": ["errors", "{{job_id}}", "download"]
            },
            "description": "Download error report file (only if job has errors)\n\nReturns downloadable text file:\n- Filename: {job_id}_errors.txt\n- Content-Type: text/plain\n- Contains all processing errors\n\n**Status Codes:**\n- 200: Error report ready, downloads file\n- 404: Job not found or no errors to report"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Job Management",
      "item": [
        {
          "name": "List All Jobs",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/jobs",
              "host": ["{{base_url}}"],
              "path": ["jobs"]
            },
            "description": "Get all jobs with current status"
          },
          "response": []
        },
        {
          "name": "Get Job Status Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/jobs/status/summary",
              "host": ["{{base_url}}"],
              "path": ["jobs", "status", "summary"]
            },
            "description": "Get job statistics summary\n\nReturns:\n- total: Total jobs\n- pending: Waiting jobs\n- processing: Active jobs\n- completed: Successful jobs\n- failed: Failed jobs\n- cancelled: Cancelled jobs"
          },
          "response": []
        },
        {
          "name": "Delete Job",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/jobs/{{job_id}}",
              "host": ["{{base_url}}"],
              "path": ["jobs", "{{job_id}}"]
            },
            "description": "Delete job and all associated files"
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "api_key",
      "value": "your-secret-api-key",
      "type": "string"
    },
    {
      "key": "job_id",
      "value": "",
      "type": "string"
    }
  ]
}
