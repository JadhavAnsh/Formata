{
  "info": {
    "name": "Formata API - Streamlined with Clean Data Profiling",
    "description": "Complete Postman collection for testing Formata API with 9-step streamlined pipeline including ydata-profiling HTML reports on clean data.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Health & Status",
      "item": [
        {
          "name": "Health Check",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/health",
              "host": ["{{base_url}}"],
              "path": ["health"]
            },
            "description": "Check if API is running (no authentication required)"
          },
          "response": []
        },
        {
          "name": "Base URL",
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{base_url}}/",
              "host": ["{{base_url}}"],
              "path": [""]
            },
            "description": "API welcome message (no authentication required)"
          },
          "response": []
        }
      ]
    },
    {
      "name": "File Upload (Step 1)",
      "item": [
        {
          "name": "Upload CSV File",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "data.csv",
                  "disabled": false
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/ingest",
              "host": ["{{base_url}}"],
              "path": ["ingest"]
            },
            "description": "Upload CSV file and create job\n\n**Step 1: Upload & Create Job**\n\nSupported formats: CSV, JSON, Excel (.xlsx/.xls), Markdown\n\n✅ Save the job_id from response to {{job_id}} variable for next requests"
          },
          "response": []
        },
        {
          "name": "Upload JSON File",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "data.json",
                  "disabled": false
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/ingest",
              "host": ["{{base_url}}"],
              "path": ["ingest"]
            },
            "description": "Upload JSON file and create job"
          },
          "response": []
        },
        {
          "name": "Upload Excel File",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "data.xlsx",
                  "disabled": false
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/ingest",
              "host": ["{{base_url}}"],
              "path": ["ingest"]
            },
            "description": "Upload Excel file and create job"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Job Processing (Steps 2-9)",
      "item": [
        {
          "name": "Start Processing",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"normalize\": true,\n  \"remove_duplicates\": true,\n  \"remove_outliers\": false,\n  \"filters\": {},\n  \"output_format\": \"csv\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/process/{{job_id}}",
              "host": ["{{base_url}}"],
              "path": ["process", "{{job_id}}"]
            },
            "description": "Start 9-step pipeline processing\n\n**Processing Steps:**\n- Step 2: Parse Data (20%)\n- Step 3: Normalize Data Types (25%)\n- Step 4: Apply Filters (40%)\n- Step 5: Remove Duplicates & Outliers (50%)\n- Step 6: Validate Results (65%)\n- Step 7: Profile Clean Data (ydata-profiling HTML) (80%)\n- Step 8: Convert/Vectorize (90%)\n- Step 9: Save Outputs + Reports (95-100%)\n\n**Configuration:**\n- normalize: boolean\n- remove_duplicates: boolean\n- remove_outliers: boolean\n- filters: object\n- output_format: \"csv\" or \"json\""
          },
          "response": []
        },
        {
          "name": "Check Processing Status",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/status/{{job_id}}",
              "host": ["{{base_url}}"],
              "path": ["status", "{{job_id}}"]
            },
            "description": "Get real-time status and progress (0.0-1.0)\n\nReturns:\n- status: pending | processing | completed | failed\n- progress: 0.0 to 1.0\n- rows_before: Original row count\n- rows_after: Processed row count\n- errors: Array of validation errors\n- metadata: Processing metadata"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Data Profiling (Step 7)",
      "item": [
        {
          "name": "Get Data Profile (HTML)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/profile/{{job_id}}",
              "host": ["{{base_url}}"],
              "path": ["profile", "{{job_id}}"]
            },
            "description": "Get HTML profile report of CLEAN processed data\n\n**Step 7 Output:**\n- Generated after validation (on clean data)\n- Created by ydata-profiling\n- Returns comprehensive HTML report\n\n**Includes:**\n- Dataset Overview\n- Variable Statistics\n- Correlations\n- Missing Values Analysis\n- Sample Data\n- Duplicate Rows\n- Interactions\n\n**Status Codes:**\n- 200: Profile ready, returns HTML content\n- 202: Job still processing (with progress %)\n- 404: Job not found or profile not generated\n- 500: Job failed during processing"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Downloads (Steps 10-11)",
      "item": [
        {
          "name": "Download Clean Data File",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/result/{{job_id}}/download",
              "host": ["{{base_url}}"],
              "path": ["result", "{{job_id}}", "download"]
            },
            "description": "Download processed/cleaned data file (only when status=completed)\n\nReturns downloadable file:\n- CSV or JSON format based on output_format config\n- Filename: {job_id}_clean.csv or {job_id}_clean.json\n- Content-Type: text/csv or application/json\n\n**Status Codes:**\n- 200: File ready, downloads file\n- 400: Job not completed yet\n- 404: Job not found or file missing"
          },
          "response": []
        },
        {
          "name": "Download Error Report",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/errors/{{job_id}}/download",
              "host": ["{{base_url}}"],
              "path": ["errors", "{{job_id}}", "download"]
            },
            "description": "Download error report file (only if job has errors)\n\nReturns downloadable text file:\n- Filename: {job_id}_errors.txt\n- Content-Type: text/plain\n- Contains all processing errors\n\n**Status Codes:**\n- 200: Error report ready, downloads file\n- 404: Job not found or no errors to report"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Vector Generation (LLM Integration)",
      "item": [
        {
          "name": "Generate Vectors",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"method\": \"hybrid\"\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/vectors/{{job_id}}/generate",
              "host": ["{{base_url}}"],
              "path": ["vectors", "{{job_id}}", "generate"]
            },
            "description": "Generate vector embeddings from processed data\n\n**Methods:**\n- `hybrid` (recommended): Text embeddings + normalized numeric + one-hot categorical\n- `text_only`: All columns as text with 512-dim embeddings\n- `numeric`: Fast, minimal vectorization (numeric only)\n\n**Response includes:**\n- vector_shape: [n_samples, n_features]\n- n_samples: Number of rows\n- n_features: Total dimensions\n- method: Vectorization method used\n- download_formats: [\"pkl\", \"h5\"]\n\n**Status Codes:**\n- 200: Vectors generated successfully\n- 404: Job not found\n- 400: Job not completed or invalid method"
          },
          "response": []
        },
        {
          "name": "Download Vectors (.pkl)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/vectors/{{job_id}}/download?format=pkl",
              "host": ["{{base_url}}"],
              "path": ["vectors", "{{job_id}}", "download"],
              "query": [
                {
                  "key": "format",
                  "value": "pkl",
                  "description": "Pickle format - smaller, Python-native"
                }
              ]
            },
            "description": "Download vectors as Python pickle file (.pkl)\n\n**Format: .pkl**\n- Best for: Python projects, prototyping\n- Size: Smaller (8-80 MB for typical datasets)\n- Speed: Faster read/write\n- Language: Python only\n\n**Usage:**\n```python\nimport pickle\nwith open('vectors.pkl', 'rb') as f:\n    data = pickle.load(f)\n    vectors = data['vectors']\n    metadata = data['metadata']\n```\n\n**Status Codes:**\n- 200: File download starts\n- 404: Job not found\n- 400: Job not completed or invalid format"
          },
          "response": []
        },
        {
          "name": "Download Vectors (.h5)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/vectors/{{job_id}}/download?format=h5",
              "host": ["{{base_url}}"],
              "path": ["vectors", "{{job_id}}", "download"],
              "query": [
                {
                  "key": "format",
                  "value": "h5",
                  "description": "HDF5 format - compressed, cross-platform"
                }
              ]
            },
            "description": "Download vectors as HDF5 file (.h5)\n\n**Format: .h5**\n- Best for: Large datasets, production systems\n- Size: Compressed (2-20 MB with gzip)\n- Speed: Slower but memory efficient\n- Language: Python, R, Java, JavaScript, C++\n- Supports: Chunked reading for large files\n\n**Usage:**\n```python\nimport h5py\nwith h5py.File('vectors.h5', 'r') as f:\n    vectors = f['vectors'][:]\n    # Or read in chunks:\n    batch = f['vectors'][0:1000]\n```\n\n**Status Codes:**\n- 200: File download starts\n- 404: Job not found\n- 400: Job not completed or invalid format"
          },
          "response": []
        },
        {
          "name": "Get Vector Info",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/vectors/{{job_id}}/info",
              "host": ["{{base_url}}"],
              "path": ["vectors", "{{job_id}}", "info"]
            },
            "description": "Get vector metadata without downloading\n\n**Returns:**\n- vector_info:\n  - shape: [n_samples, n_features]\n  - n_samples: Number of rows\n  - n_features: Total dimensions\n  - method: Vectorization method\n  - original_columns: Original column names\n  - feature_names: Generated feature names (first 20)\n- download_formats: Available formats\n- supported_methods: Available vectorization methods\n\n**Use this to:**\n- Check vector dimensions before downloading\n- Verify column mappings\n- Decide which format to download\n\n**Status Codes:**\n- 200: Info retrieved successfully\n- 404: Job not found\n- 400: Job not completed"
          },
          "response": []
        }
      ]
    },
    {
      "name": "Format Conversion",
      "item": [
        {
          "name": "Convert CSV to JSON",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "body": {
              "mode": "formdata",
              "formdata": [
                {
                  "key": "file",
                  "type": "file",
                  "src": "data.csv",
                  "disabled": false
                }
              ]
            },
            "url": {
              "raw": "{{base_url}}/convert/csv-to-json",
              "host": ["{{base_url}}"],
              "path": ["convert", "csv-to-json"]
            },
            "description": "Convert CSV file to JSON format\n\n**Accepts:** CSV file upload\n**Returns:** JSON with records array\n\nSupports:\n- Type inference and normalization\n- Nested JSON flattening\n- Proper encoding handling"
          },
          "response": []
        },
        {
          "name": "Convert JSON to CSV",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"data\": {\n    \"records\": [\n      {\n        \"name\": \"John Doe\",\n        \"age\": 30,\n        \"email\": \"john@example.com\"\n      },\n      {\n        \"name\": \"Jane Smith\",\n        \"age\": 25,\n        \"email\": \"jane@example.com\"\n      }\n    ]\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/convert/json-to-csv",
              "host": ["{{base_url}}"],
              "path": ["convert", "json-to-csv"]
            },
            "description": "Convert JSON to CSV format\n\n**Accepts:** JSON data (dict with records or list of objects)\n**Returns:** CSV as string\n\nRequest body can be:\n- {\"data\": {\"records\": [...]}} - dict with records key\n- {\"data\": [{...}, {...}]} - direct array of objects"
          },
          "response": []
        },
        {
          "name": "Generic Format Converter",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"input_format\": \"json\",\n  \"output_format\": \"csv\",\n  \"data\": {\n    \"records\": [\n      {\n        \"name\": \"John Doe\",\n        \"age\": 30,\n        \"email\": \"john@example.com\"\n      }\n    ]\n  }\n}",
              "options": {
                "raw": {
                  "language": "json"
                }
              }
            },
            "url": {
              "raw": "{{base_url}}/convert",
              "host": ["{{base_url}}"],
              "path": ["convert"]
            },
            "description": "Generic format converter endpoint\n\n**Supports:** CSV ↔ JSON conversion\n**Validates:** Input and output formats\n\nSpecify formats and provide data to convert between them.\nInput and output formats must be different."
          },
          "response": []
        }
      ]
    },
    {
      "name": "Job Management",
      "item": [
        {
          "name": "List All Jobs",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/jobs",
              "host": ["{{base_url}}"],
              "path": ["jobs"]
            },
            "description": "Get all jobs with current status"
          },
          "response": []
        },
        {
          "name": "Get Job Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/jobs/{{job_id}}",
              "host": ["{{base_url}}"],
              "path": ["jobs", "{{job_id}}"]
            },
            "description": "Get detailed job information\n\nReturns:\n- job_id: Unique job identifier\n- filename: Original uploaded filename\n- status: Current job status\n- progress: Processing progress (0.0-1.0)\n- created_at: Job creation timestamp\n- updated_at: Last update timestamp\n- errors: Array of validation errors\n- result: Processing results and file paths\n- metadata: Additional job metadata"
          },
          "response": []
        },
        {
          "name": "Get Job Status Summary",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/jobs/status/summary",
              "host": ["{{base_url}}"],
              "path": ["jobs", "status", "summary"]
            },
            "description": "Get job statistics summary\n\nReturns:\n- total: Total jobs\n- pending: Waiting jobs\n- processing: Active jobs\n- completed: Successful jobs\n- failed: Failed jobs\n- cancelled: Cancelled jobs"
          },
          "response": []
        },
        {
          "name": "Delete Job",
          "request": {
            "method": "DELETE",
            "header": [
              {
                "key": "X-API-Key",
                "value": "{{api_key}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/jobs/{{job_id}}",
              "host": ["{{base_url}}"],
              "path": ["jobs", "{{job_id}}"]
            },
            "description": "Delete job and all associated files"
          },
          "response": []
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:8000",
      "type": "string"
    },
    {
      "key": "api_key",
      "value": "your-secret-api-key",
      "type": "string"
    },
    {
      "key": "job_id",
      "value": "",
      "type": "string"
    }
  ]
}
